
{% extends "portal_beneficiario/templates/pages/home/wizard.html" %}

{% if beneficiary_data.data_declaration == false and  beneficiary_data.authorization_declaration == false%}
    {% block term_and_conditions%}
        <div id='term_and_conditions_sect' class="right_menu">
            <div class="form-row right_menu mt-3">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Términos y Condiciones</h5>
                                <p class="card-text">Al acceder y utilizar nuestros servicios, acepta que está sujeto <a href="files/2024.08. AUTORIZACIONES Y DECLARACIONES ESPECIALES.pdf" target="_blank" style="text-decoration: underline;">a las políticas, autorizaciones, términos y condiciones de StoneX</a>, y todas las leyes aplicables regirán y se interpretarán de conformidad con el ordenamiento jurídico Colombiano.</p>
                                <div class="form-check">
                                        <label class="form-check-label" for="term_conditions">Acepto</label>
                                        <input type="checkbox" class="form-check-input ml-3" id="term_conditions" name="term_conditions" value="1" {% if beneficiary_data.data_declaration == true and  beneficiary_data.data_declaration == true %} checked {% endif %}/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endblock %}
{% endif %}

{% block basic_data%}
        <div id='basic_data_sect' class="right_menu">
            <div class="form-row right_menu mt-3">
                <div class="col-4">
                    <label for="phone" class="form-label">Teléfono</label>
                    <input type="text" class="form-control" id="phone" name="phone" value="{% if beneficiary_data.phone %}{{ beneficiary_data.phone }}{%endif%}"/>
                </div>
                <div class="col-4">
                    <label for="nationality" class="form-label">Nacionalidad</label>
                    <select id="nationality" name="nationality" class="form-control">
                        
                        {% set na = frappe.get_all('qp_PO_Nationality', fields=['na_name', 'na_code'], order_by='na_code asc') %}
                        <option></option>
                        {% for n in na %}
                            <option value="{{ n.na_code }}" {% if n.na_code == beneficiary_data.nationality %} selected {% endif %} >{{ n.na_name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-row right_menu mt-3">
                <div class="col-4">
                    <label for="address" class="form-label">Dirección</label>
                    <input type="input" class="form-control" id="address" name="address" value="{% if beneficiary_data.address %}{{ beneficiary_data.address }}{%endif%}"/>
                </div>
                <div class="col-4">
                    <label for="city" class="form-label">Ciudad</label>
                    <select id="city" class="form-control" name="city">
                        <option></option>
                        {% set ci = frappe.get_all('qp_PO_City', fields=['ci_name', 'ci_code'], order_by='ci_code asc') %}
                        {% for c in ci %}
                            <option value="{{ c.ci_code }}" {% if c.ci_code == beneficiary_data.city %} selected {% endif %}>{{ c.ci_name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-row right_menu mt-3">
                <div class="col-4">
                    <label for="business" class="form-label">Actividad Económica</label>
                    <select id="business" name="business" class="form-control">
                        <option></option>
                        {% set ea = frappe.get_all('qp_PO_EconomicActivity', fields=['ea_name', 'ea_code'], order_by='ea_code asc') %}
                        {% for e in ea %}
                            <option value="{{ e.ea_code }}" {% if e.ea_code == beneficiary_data.economic_activity %} selected {% endif %}>{{ e.ea_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-4">
                    <label for="business_type" class="form-label">Actividad Laboral</label>
                    <select id="business_type"  name="business_type"  class="form-control">
                        <option></option>
                        {% set ba = frappe.get_all('qp_PO_BusinessActivity', fields=['ba_name', 'ba_code'], order_by='ba_code asc') %}
                        {% for b in ba %}
                            <option value="{{ b.ba_code }}" {% if b.ba_code == beneficiary_data.business_activity %} selected {% endif %}>{{ b.ba_name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-row right_menu mt-5">
                <div class="col-8">
                    <div class="form-group form-check">
                    <div class="form-check form-check-inline">
                        <label class="form-check-label" for="pepSi">¿Persona Públicamente Expuesta?   Si</label>
                        <input class="form-check-input ml-2" type="radio" name="pep" id="pepSi" value="1" {% if beneficiary_data.pep %} checked {% endif%}>
                    </div>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label" for="pepNo">No</label>
                        <input class="form-check-input ml-2" type="radio" name="pep" id="pepNo" value="0" {% if not beneficiary_data.pep %} checked {% endif%}>
                    </div>
                    </div>
                </div>
            </div>
            <div class="form-row right_menu mt-3 pep_fields" hidden>
                <div class="col-3">
                    <label for="position" class="form-label">Cargo</label>
                    <select id="position" class="form-control rq_cond">
                        <option></option>
                        {% set po = frappe.get_all('qp_PO_Positions', fields=['po_name', 'po_code'], order_by='po_code asc') %}
                        {% for p in po %}
                            <option value="{{ p.po_code }}" {% if p.po_code == beneficiary_data.position %} selected {% endif %}>{{ p.po_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-2">
                    <label for="link_date" class="form-label">Fecha de Vinculación</label>
                    <input type="text" class="form-control rq_cond" id="link_date" name="link_date" value="{% if beneficiary_data.link_date %}{{ frappe.format( beneficiary_data.link_date , {'fieldtype': 'Date'}) }}{% endif %}">
                </div>
                <div class="col-3">
                    <label for="business_type_pep" class="form-label">Actividad Laboral</label>
                    <select id="business_type_pep" class="form-control">
                        <option selected></option>
                        {% set ba = frappe.get_all('qp_PO_BusinessActivity', fields=['ba_name', 'ba_code'], order_by='ba_code asc') %}
                        {% for b in ba %}
                            <option value="{{ b.ba_code }}" {% if b.po_code == beneficiary_data.economic_activity %} selected {% endif %}>{{ b.ba_name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-row right_menu mt-5">
                <div class="col-8">
                    <div class="form-group form-check">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label" for="fpepSi">¿Familiar Políticamente Expuesto?   Si</label>
                            <input class="form-check-input ml-2" type="radio" name="fpep" id="fpepSi" value="1" {% if beneficiary_data.peps_parent %} checked {% endif%}>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label" for="fpepNo">No</label>
                            <input class="form-check-input ml-2" type="radio" name="fpep" id="fpepNo" value="0" {% if not beneficiary_data.peps_parent %} checked {% endif%}>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-row right_menu mt-3 fpep_fields" hidden>
                <div class="col-4">
                    <label for="fpep_name" class="form-label">Nombre</label>
                    <input type="text" class="form-control rq_cond" id="fpep_name" value="{% if beneficiary_data.parent_name %}{{beneficiary_data.parent_name}}{%endif%}">
                </div>
                <div class="col-4">
                    <label for="parent_type" class="form-label">Tipo de Parentesco</label>
                    <select id="parent_type" class="form-control rq_cond">
                        <option selected></option>
                        {% set pt = frappe.get_all('qp_PO_ParentType', fields=['pt_name', 'pt_code'], order_by='pt_code asc') %}
                        {% for p in pt %}
                            <option value="{{ p.pt_code }}" {% if p.pt_code == beneficiary_data.parent_type %} selected {% endif %}>{{ p.pt_name }}</option>
                        {% endfor %}
                    </select>
                </div>
               
            </div>
            <div class="form-row right_menu mt-3">
                <div class="col-2">
                    <label for="in" class="form-label">Ingresos</label>
                    <input type="text" class="form-control number" id="in" name="in" value="{% if beneficiary_data.income %}{{beneficiary_data.income}}{%endif%}">
                </div>
                <div class="col-2">
                    <label for="out" class="form-label">Egresos</label>
                    <input type="text"  class="form-control number" id="out" name="out" value="{% if beneficiary_data.egress %}{{beneficiary_data.egress}}{%endif%}">
                </div>
                <div class="col-2">
                    <label for="assets" class="form-label">Activos</label>
                    <input type="text" class="form-control number" id="assets" name="assets" value="{% if beneficiary_data.assets %}{{beneficiary_data.assets}}{%endif%}">
                </div>
                <div class="col-2">
                    <label for="passive" class="form-label">Pasivos</label>
                    <input type="text" class="form-control number" id="passive" name="passive" value="{% if beneficiary_data.passive %}{{beneficiary_data.passive}}{%endif%}">
                </div>
            </div>
            <div class="form-row right_menu mt-3">
                <div class="col-4">
                    <label for="source_fund" class="form-label">Origen de los dinero a recibir</label>
                    <select id="source_fund" name="source_fund" class="form-control">
                        <option selected></option>
                        {% set sf = frappe.get_all('qp_PO_SourceFund', fields=['sf_name', 'sf_code'], order_by='sf_code asc') %}
                        {% for s in sf %}
                            <option value="{{ s.sf_code }}"  {% if s.sf_code == beneficiary_data.source_fund %} selected {% endif %}>{{ s.sf_name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
{% endblock %}


{% block verificacion%}
    <div id='verificacion_sect' class="right_menu">
        <div class="form-row right_menu mt-3">
            <div class="col-8">
                <div class="embed-responsive embed-responsive-16by9">
                    <iframe id="jumio_iframe" class="embed-responsive-item" src="" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
{% endblock %}